<!-- Only show component if authorized -->
<ng-container
  *ngIf="(user$ | async)?.signedIn || restricted; else notAuthorized"
>
  <ng-container
    *ngIf="selectedGroup$ | async as group; else noGroupSelect"
  >
    <h2 *ngIf="group?.name">
      {{
        'success-modeling.community-workspace'
          | translate: { community: group.name }
      }}
    </h2>

    <!-- workspace management -->
    <app-workspace-management></app-workspace-management>

    <mat-tab-group
      mat-align-tabs="start"
      [selectedIndex]="selectedTab"
    >
      <mat-tab label="Success modeling" routerLink="/modeling">
        <!-- success modeling -->
        <app-success-modeling></app-success-modeling>
      </mat-tab>
      <mat-tab routerLink="/requirements">
        <ng-template mat-tab-label>
          <span
            [matBadge]="numberOfRequirements$ | async"
            matBadgeColor="accent"
            matBadgeOverlap="false"
            matTooltip="{{
              'success-modeling.reqbaz.tooltip' | translate
            }}"
            >Requirements and issues</span
          > </ng-template
        ><app-requirements></app-requirements>
      </mat-tab>
    </mat-tab-group>
  </ng-container>
</ng-container>

<ng-template #noGroupSelect>
  <mat-card>
    {{ 'success-modeling.no-group-selected' | translate }}
  </mat-card>
</ng-template>

<ng-template #noServiceSelect>
  <mat-card>{{
    'success-modeling.message-no-application-selected' | translate
  }}</mat-card>
</ng-template>

<ng-template #notInitialized>
  <!-- success model still loading -->
  <mat-spinner style="margin: auto"> </mat-spinner>
</ng-template>

<ng-template #notAuthorized>
  <mat-card>
    {{ 'not-logged-in' | translate }}
  </mat-card>
</ng-template>
