<!-- Only show component if authorized. We are authorized if we are signed in or we have restricted access to the model -->
<ng-container
  *ngIf="restricted || (user$ | async)?.signedIn; else notAuthorized"
>
  <ng-container
    *ngIf="selectedGroup$ | async as group; else noGroupSelected"
  >
    <h2>
      {{
        'success-modeling.community-workspace'
          | translate: { community: group?.name }
      }}
    </h2>

    <mat-tab-group
      dynamicHeight
      mat-align-tabs="start"
      animationDuration="0ms"
    >
      <!-- success model -->
      <mat-tab label="Success modeling">
        <!-- workspace management -->
        <app-workspace-management></app-workspace-management>
        <app-success-model></app-success-model>
      </mat-tab>

      <!-- requirements -->
      <mat-tab>
        <ng-template mat-tab-label>
          <span
            [matBadge]="numberOfRequirements$ | async"
            matBadgeColor="accent"
            matBadgeOverlap="false"
            >{{
              'success-modeling.requirements.title' | translate
            }}</span
          > </ng-template
        ><app-requirements></app-requirements>
      </mat-tab>
      <mat-tab label="Community">
        <app-community-info></app-community-info>
      </mat-tab>
    </mat-tab-group>
  </ng-container>
</ng-container>

<ng-template #notAuthorized>
  <mat-card>
    {{ 'not-logged-in' | translate }}
  </mat-card>
</ng-template>

<ng-template #noGroupSelected>
  <mat-card>
    {{ 'success-modeling.no-group-selected' | translate }}
  </mat-card>
</ng-template>
