<mat-card>
  <mat-card-header>
    <mat-icon mat-card-avatar>help_outline</mat-icon>
    <mat-card-title>{{
      'success-modeling.questionnaires.title' | translate
    }}</mat-card-title>
    <mat-card-subtitle>{{
      'success-modeling.questionnaires.subtitle' | translate
    }}</mat-card-subtitle>
    <div id="push-right"></div>
    <button
      *ngIf="canEdit$ | async"
      mat-icon-button
      matTooltipShowDelay="0"
      matTooltip="{{
        'success-modeling.questionnaires.add-questionnaire-tooltip'
          | translate
      }}"
      (click)="openPickQuestionnaireDialog()"
    >
      <mat-icon color="primary" id="add-questionnaire-icon"
        >add</mat-icon
      >
    </button>
  </mat-card-header>
  <mat-card-content *ngIf="model$ | async as model">
    <p
      *ngIf="
        !model.questionnaires || model.questionnaires.length === 0
      "
    >
      {{
        'success-modeling.questionnaires.no-questionnaires'
          | translate
      }}
      <ng-container *ngIf="!(editMode$ | async)">{{
        'success-modeling.questionnaires.activate-edit' | translate
      }}</ng-container>
    </p>
    <table>
      <tr
        *ngFor="
          let questionnaire of model.questionnaires;
          let i = index
        "
      >
        <div *ngIf="questionnaire" class="questionnaire-row">
          <td *ngIf="canEdit$ | async">
            <button
              mat-icon-button
              matTooltipShowDelay="0"
              matTooltip="{{
                'success-modeling.questionnaires.remove-questionnaire-tooltip'
                  | translate
              }}"
              (click)="openRemoveQuestionnaireDialog(i)"
            >
              <mat-icon color="warn">remove_circle_outline</mat-icon>
            </button>
          </td>
          <th>{{ questionnaire.name }}</th>
          <td>
            <mat-icon
              id="info-icon"
              matTooltipShowDelay="0"
              matTooltipPosition="above"
              matTooltip="{{
                getQuestionnaireByName(questionnaire.name)
                  ?.description
              }}"
            >
              info_outline
            </mat-icon>
          </td>
          <td>
            <a
              mat-icon-button
              [href]="
                mobsosSurveysUrl +
                '/surveys/' +
                questionnaire.surveyId
              "
              color="primary"
              target="_blank"
            >
              <mat-icon>open_in_browser</mat-icon>
            </a>
          </td>
        </div>
      </tr>
    </table>
  </mat-card-content>
</mat-card>
